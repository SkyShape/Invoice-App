{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Desktop/webdev/invoice-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/User/Desktop/webdev/invoice-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/User/Desktop/webdev/invoice-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useLayoutEffect,useEffect}from\"react\";import inv from\"./data.json\";import{jsx as _jsx}from\"react/jsx-runtime\";var AppContext=/*#__PURE__*/React.createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;var infoFormat={clientAddress:{street:\"\",city:\"\",postCode:\"\",country:\"\"},clientEmail:\"\",clientName:\"\",createdOn:\"\",description:\"\",id:\"\",items:[{total:\"\"}],paymentDue:\"\",paymentTerms:\"1\",senderAddress:{street:\"\",city:\"\",postCode:\"\",country:\"\"},status:\"\",total:\"\"};var _useState=useState(_toConsumableArray(inv)),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(_objectSpread({},infoFormat)),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),chosenId=_useState6[0],setChosenId=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),idx=_useState8[0],setIdx=_useState8[1];var _useState9=useState({draft:false,pending:false,paid:false}),_useState10=_slicedToArray(_useState9,2),statuses=_useState10[0],setStatuses=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),confDelete=_useState12[0],setConfDelete=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showForm=_useState14[0],setShowForm=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),edit=_useState16[0],setEdit=_useState16[1];function useWindowSize(){var _useState17=useState([0,0]),_useState18=_slicedToArray(_useState17,2),size=_useState18[0],setSize=_useState18[1];useLayoutEffect(function(){function updateSize(){setSize([window.innerWidth,window.innerHeight]);}window.addEventListener(\"resize\",updateSize);updateSize();return function(){return window.removeEventListener(\"resize\",updateSize);};},[]);return size;}useEffect(function(){var json=localStorage.getItem(\"testObj\");if(json){setData(JSON.parse(json));}},[]);useEffect(function(){localStorage.setItem(\"testObj\",JSON.stringify(data));if(data.length===0){setData(_toConsumableArray(inv));}});var handleCancel=function handleCancel(){setEdit(false);setShowForm(false);};var onSubmit=function onSubmit(dat){var total=0;dat.items.map(function(el){el.total=el.quantity*el.price;total+=parseInt(el.total);});if(edit){var final=_objectSpread(_objectSpread(_objectSpread({},info),dat),{},{status:\"pending\",total:total,paymentDue:addDays(dat.createdOn,dat.paymentTerms)});setInfo(_objectSpread(_objectSpread({},info),final));data.splice(idx,1,final);setData(_toConsumableArray(data));}else{setData([].concat(_toConsumableArray(data),[_objectSpread(_objectSpread(_objectSpread({},info),dat),{},{id:idGen(),status:\"pending\",total:total,paymentDue:addDays(dat.createdOn,dat.paymentTerms)})]));}handleCancel();};var handleDraft=function handleDraft(getValues,reset){var total=0;var draft=_objectSpread(_objectSpread({},info),getValues());draft.items.map(function(el){el.total=el.quantity*el.price;total+=parseInt(el.total);draft.total=total;});console.log(addDays(draft.createdOn,draft.paymentTerms));setInfo(_objectSpread(_objectSpread({},info),draft));if(!edit){setData([].concat(_toConsumableArray(data),[_objectSpread(_objectSpread({},draft),{},{id:idGen(),status:\"draft\",paymentDue:addDays(draft.createdOn,draft.paymentTerms)})]));setInfo(_objectSpread({},infoFormat));}else{data.splice(idx,1,draft);}handleCancel();};var addDays=function addDays(date,days){var result=new Date(date);result.setDate(result.getDate()+parseInt(days));return result;};var idGen=function idGen(){return Math.random().toString(36).substr(2,6).toUpperCase();};return/*#__PURE__*/_jsx(AppContext.Provider,{value:{data:data,setData:setData,useWindowSize:useWindowSize,setChosenId:setChosenId,chosenId:chosenId,info:info,setInfo:setInfo,statuses:statuses,setStatuses:setStatuses,infoFormat:infoFormat,idx:idx,setIdx:setIdx,confDelete:confDelete,setConfDelete:setConfDelete,showForm:showForm,setShowForm:setShowForm,edit:edit,setEdit:setEdit,handleCancel:handleCancel,onSubmit:onSubmit,idGen:idGen,handleDraft:handleDraft},children:children});};export var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider};","map":{"version":3,"sources":["C:/Users/User/Desktop/webdev/invoice-app/src/context.js"],"names":["React","useState","useContext","useLayoutEffect","useEffect","inv","AppContext","createContext","AppProvider","children","infoFormat","clientAddress","street","city","postCode","country","clientEmail","clientName","createdOn","description","id","items","total","paymentDue","paymentTerms","senderAddress","status","data","setData","info","setInfo","chosenId","setChosenId","idx","setIdx","draft","pending","paid","statuses","setStatuses","confDelete","setConfDelete","showForm","setShowForm","edit","setEdit","useWindowSize","size","setSize","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","json","localStorage","getItem","JSON","parse","setItem","stringify","length","handleCancel","onSubmit","dat","map","el","quantity","price","parseInt","final","addDays","splice","idGen","handleDraft","getValues","reset","console","log","date","days","result","Date","setDate","getDate","Math","random","toString","substr","toUpperCase","useGlobalContext"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useLayoutEffect, useEffect } from \"react\";\r\nimport inv from \"./data.json\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nconst AppProvider = ({ children }) => {\r\n  const infoFormat = {\r\n    clientAddress: {\r\n      street: \"\",\r\n      city: \"\",\r\n      postCode: \"\",\r\n      country: \"\",\r\n    },\r\n    clientEmail: \"\",\r\n    clientName: \"\",\r\n    createdOn: \"\",\r\n    description: \"\",\r\n    id: \"\",\r\n    items: [{ total: \"\" }],\r\n    paymentDue: \"\",\r\n    paymentTerms: \"1\",\r\n    senderAddress: {\r\n      street: \"\",\r\n      city: \"\",\r\n      postCode: \"\",\r\n      country: \"\",\r\n    },\r\n    status: \"\",\r\n    total: \"\",\r\n  };\r\n\r\n  const [data, setData] = useState([...inv]);\r\n  const [info, setInfo] = useState({ ...infoFormat });\r\n  const [chosenId, setChosenId] = useState([]);\r\n  const [idx, setIdx] = useState(0);\r\n\r\n  const [statuses, setStatuses] = useState({\r\n    draft: false,\r\n    pending: false,\r\n    paid: false,\r\n  });\r\n  const [confDelete, setConfDelete] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  function useWindowSize() {\r\n    const [size, setSize] = useState([0, 0]);\r\n    useLayoutEffect(() => {\r\n      function updateSize() {\r\n        setSize([window.innerWidth, window.innerHeight]);\r\n      }\r\n      window.addEventListener(\"resize\", updateSize);\r\n      updateSize();\r\n      return () => window.removeEventListener(\"resize\", updateSize);\r\n    }, []);\r\n    return size;\r\n  }\r\n\r\n  useEffect(() => {\r\n    const json = localStorage.getItem(\"testObj\");\r\n    if (json) {\r\n      setData(JSON.parse(json));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"testObj\", JSON.stringify(data));\r\n    if (data.length === 0) {\r\n      setData([...inv]);\r\n    }\r\n  });\r\n\r\n  const handleCancel = () => {\r\n    setEdit(false);\r\n    setShowForm(false);\r\n  };\r\n\r\n  const onSubmit = (dat) => {\r\n    let total = 0;\r\n    dat.items.map((el) => {\r\n      el.total = el.quantity * el.price;\r\n      total += parseInt(el.total);\r\n    });\r\n    if (edit) {\r\n      const final = {\r\n        ...info,\r\n        ...dat,\r\n        status: \"pending\",\r\n        total,\r\n        paymentDue: addDays(dat.createdOn, dat.paymentTerms),\r\n      };\r\n\r\n      setInfo({\r\n        ...info,\r\n        ...final,\r\n      });\r\n      data.splice(idx, 1, final);\r\n      setData([...data]);\r\n    } else {\r\n      setData([\r\n        ...data,\r\n        {\r\n          ...info,\r\n          ...dat,\r\n          id: idGen(),\r\n          status: \"pending\",\r\n          total,\r\n          paymentDue: addDays(dat.createdOn, dat.paymentTerms),\r\n        },\r\n      ]);\r\n    }\r\n    handleCancel();\r\n  };\r\n\r\n  const handleDraft = (getValues, reset) => {\r\n    let total = 0;\r\n    const draft = {\r\n      ...info,\r\n      ...getValues(),\r\n    };\r\n    draft.items.map((el) => {\r\n      el.total = el.quantity * el.price;\r\n      total += parseInt(el.total);\r\n      draft.total = total;\r\n    });\r\n    console.log(addDays(draft.createdOn, draft.paymentTerms));\r\n    setInfo({ ...info, ...draft });\r\n    if (!edit) {\r\n      setData([\r\n        ...data,\r\n        {\r\n          ...draft,\r\n          id: idGen(),\r\n          status: \"draft\",\r\n          paymentDue: addDays(draft.createdOn, draft.paymentTerms),\r\n        },\r\n      ]);\r\n      setInfo({ ...infoFormat });\r\n    } else {\r\n      data.splice(idx, 1, draft);\r\n    }\r\n    handleCancel();\r\n  };\r\n\r\n  const addDays = (date, days) => {\r\n    let result = new Date(date);\r\n    result.setDate(result.getDate() + parseInt(days));\r\n    return result;\r\n  };\r\n\r\n  const idGen = function () {\r\n    return Math.random().toString(36).substr(2, 6).toUpperCase();\r\n  };\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        data,\r\n        setData,\r\n        useWindowSize,\r\n        setChosenId,\r\n        chosenId,\r\n        info,\r\n        setInfo,\r\n        statuses,\r\n        setStatuses,\r\n        infoFormat,\r\n        idx,\r\n        setIdx,\r\n        confDelete,\r\n        setConfDelete,\r\n        showForm,\r\n        setShowForm,\r\n        edit,\r\n        setEdit,\r\n        handleCancel,\r\n        onSubmit,\r\n        idGen,\r\n        handleDraft,\r\n      }}\r\n    >\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useGlobalContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n\r\nexport { AppContext, AppProvider };\r\n"]},"metadata":{},"sourceType":"module"}